#!/usr/bin/env bash

function mkd () {
	mkdir -p "$1" && cd "$1"
}

# Remove trailing whitespace from file(s)
function rmws () {
	# make sure our symlinks - i.e. config files - are followed
	# TODO maybe warn?
	sed --follow-symlinks -i 's/[ \t]*$//' "$@"
}

function str_contains() {
	# http://stackoverflow.com/questions/2829613/how-do-you-tell-if-a-string-contains-another-string-in-unix-shell-scripting
	local string="$1"
	local substring="$2"
	if test "${string#*$substring}" != "$string"
	then
		return 0    # $substring is in $string
	else
		return 1    # $substring is not in $string
	fi
}

function notifysendify () {
	"$@" | while read line; do
		notify-send "$line"
	done
}

function notifysendifyerr () {
	# http://stackoverflow.com/a/2342841
	"$@" 2>&1 >/dev/null | while read line; do
		notify-send "$line"
	done
}

function sourceedit() {
	$EDITOR "$@"
	for arg in "$@" ; do
		source "$arg"
	done
}

function mroot() {
	declare -r GITROOT="$(gitroot)"
	while [[ "$GITROOT" != "$PWD" ]]; do
		test -f pom.xml && break
		cd ..
	done
}
