#!/usr/bin/env ruby
require 'json/jwt'

def read_key(fname)
  OpenSSL::PKey.read(File.read fname)
end

hash = ARGV[1] || 'sha256'

key = read_key(ARGV[0])
key = key.public_key unless key.public?

jwk = JSON::JWK.new(key)
puts jwk.thumbprint(hash)
